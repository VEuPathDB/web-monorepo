# web-monorepo

## Prerequisties
* `Node <=16.17.1`
* Either a global installation of `yarn >=1.17.0`, or `volta >=1.1.0`
** With such a version of `yarn` globally installed, all `yarn` commands executed in this repo will be delegated to the "pinned" `yarn@3.3.1` installation included in `.yarn/releases`.
** With such a version of https://volta.sh/[volta] installed, the required version of `yarn` will automatically be installed.

## Quick Start

### Install yarn dependencies

From anywhere in the repo:

```
yarn
```

### View workspace dependency graph

From the root `package.json`:

```
yarn nx graph
```

### Execute a workspace's yarn script using the `nx` task runner

From the root `package.json`:

```
yarn nx run <workspaceName>:<scriptName>
```

For example, you can start the MultiBLAST dev server by running

```
yarn nx run @veupathdb/multi-blast:start
```

### Rebuild dependencies when running a development server

When running a development server (such as `yarn nx start @veupathdb/eda` or `yarn nx start @veupathdb/clinepi-site`),
use the following command to rebuild changes made to dependencies, and to have the dev site reload with the changes:

```
cd packages/libs/<package>
yarn build-npm-modules
```

**Note: You may need to manually reload your website to see the changes the first time.**

_Using the equivalent `nx` command (`yarn nx build-npm-modules @veupathdb/<package>`) has proven inadequate in this scenario._
