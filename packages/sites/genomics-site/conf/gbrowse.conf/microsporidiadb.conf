[GENERAL]
description   = MicrosporidiaDB
db_adaptor    = DAS::GUS
db_args       = sub { GBrowse::Configuration::init('gbrowseQueries.xml') }

# important EuPathDB set this id to 1
image_id      = 1

plugins = BatchDumper FastaDumper GFFDumper RestrictionAnnotator Submitter

# Web site configuration info
gbrowse root = gbrowse
stylesheet   = /assets/css/eupath_gbrowse.css
buttons      = images/buttons
js           = js
tmpimages    = tmp

region segment = 10000
initial landmark =  Ein01:1-55000

# advanced features
# balloon tips on and drag off
balloon tips  = 1
drag and drop = 0

# one hour
cache time    = 0

request timeout = 240 

# where to link to when user clicks in detailed view
link          = 

# what image widths to offer
image widths  = 450 640 800 1024 1280

# color of the selection rectangle
hilite fill    = beige
hilite outline = red

# default width of detailed view (pixels)
default width = 800
default features = Gene

# max and default segment sizes for detailed view
max segment     = 10000000
default segment = 50000

# zoom levels
zoom levels    = 50 100 200 1000 2000 5000 10000 20000 40000 100000 200000 500000 1000000

show sources = 0
default varying = 1 # tracks appear as defined below, not in alphabetical order


# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgoldenrodyellow
key bgcolor      = beige

default varying = 1 # tracks appear as defined below, not in alphabetical order

# examples to show in the introduction
examples = Ein01:1-55000 NC_003242:5000..15000 

automatic classes = Gene EST 


### HTML TO INSERT AT VARIOUS STRATEGIC LOCATIONS ###
# inside the <head></head> section
head = <script type='text/javascript' src='/a/js/newwindow.js'></script> 

header = \&myheader();
footer = \&myfooter();

# Various places where you can insert your own HTML -- see configuration docs
html1 = sub { GBrowse::Display::warnNote(shift, 'microsporidiadb') }
html2 = <h3> Select the Data Source of your choice (above).</h3><br> 
html3 = <script type="text/javascript" src="/gbrowse/apiGBrowsePopups.js"></script>
html4 = 
html5 = 
html6 = <script type="text/javascript" src="/gbrowse/wz_tooltip.js"></script>

init_code = use vars qw( $CFG );
            use GBrowse::Configuration;
            use GBrowse::Display;
            use GBrowse::Filter;
            use GBrowse::PopupAndLinks;
            $CFG = new GBrowse::Configuration;

postgrid = \&mypostgrid();

# Advanced feature: 
# Pop up rubberband menus for submitting selected region to search engines...
#include "overview_select_menu.conf"
#include "region_select_menu.conf"
#include "submitter_plugin.conf"

# Default glyph settings
#include "track_defaults.conf" 

###################################
# Plugin configuration
###################################


[Annotation:overview] 
feature      = gene:annotation
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'lightblue', 'red') }
fgcolor      = sub { GBrowse::Display::simpleFgColorFromStrand(shift, 'blue', 'darkred') }
label        = 1
key          = genes

[Annotation:region] 
feature      = gene:annotation
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'lightblue', 'red') }
fgcolor      = sub { GBrowse::Display::simpleFgColorFromStrand(shift, 'blue', 'darkred') }
label        = 1
key          = genes

[Gene]
feature     = gene:annotation 
glyph       = processed_transcript_gtu
category    = 1. Gene Models
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
font2color  = black
thin_utr     = 1
draw_dna     = 1 
height        = 8 
description   = 0
label density = 100
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
link_target   = sub { GBrowse::PopupAndLinks::geneTitle(shift) }
label      = 1
preset     = Annotation
key          = Annotated Genes (with UTRs in gray when available)
citation     = Structural and functional gene annotation provided by the sequencing centers.<br><br> Colors are as follows:<br><br> Blue = forward strand relative to the sequence<br> Red = reverse strand to the sequence<br> Gray indicates 5'  and 3' UTRs<br>

 
[BLASTX]
feature      = match:WU_BLASTX
glyph        = graded_segments
height       = 6 
label         = 0
stranded     = 1
bump density = 5000
bump_limit   = 10
link         = http://www.ncbi.nlm.nih.gov/entrez/viewer.fcgi?db=protein&val=$name
link_target = sub { GBrowse::PopupAndLinks::blastxTitle(shift) }
bgcolor     = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'navy', 'maroon') }
key          = BLASTX Alignments
category     = 1. Gene Models
citation     = Genomic sequences were used as queries in BLASTX searches against NCBI&#39;s non-redundant protein database (NRDB).

[ORF]
feature      = alignment:ORF
sqlName      = alignment:ORFlength
sqlParam     = minLength:'600'
category     = 6. Nucleotide Analysis
glyph        = segments
height       = 4
key          = ORF >/= 150 nucleotides (50 amino acids)
stranded     = 0
bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
fgcolor      = black
description  = 0
label       = 0
bump_limit  = 10
link         = sub { GBrowse::PopupAndLinks::orfLink(shift) }
link_target  = sub { GBrowse::PopupAndLinks::orfTitle(shift) }
citation     = ORFs greater than 150nt (50aa), generated by EuPathDB.

[ORF300]
feature      = alignment:ORF300
sqlName      = alignment:ORFlength
sqlParam     = minLength:'300'
category     = 6. Nucleotide Analysis
glyph        = segments
height       = 4
key          = ORF >/= 300 nucleotides (100 amino acids)
stranded     = 0
bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
fgcolor      = black
bump density  = 5000
description  = 0
label       = 0
bump_limit  = 10
link         = sub { GBrowse::PopupAndLinks::orfLink(shift) }
link_target  = sub { GBrowse::PopupAndLinks::orfTitle(shift) }
citation     = ORFs greater than 300nt (100aa), generated by EuPathDB.

[ORF600]
feature      = alignment:ORF600
sqlName      = alignment:ORFlength
sqlParam     = minLength:'600'
category     = 6. Nucleotide Analysis
glyph        = segments
height       = 4
key          = ORF >/= 600 nucleotides (200 amino acids)
stranded     = 0
bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
fgcolor      = black
bump density  = 5000
description  = 0
label       = 0
bump_limit  = 10
link         = sub { GBrowse::PopupAndLinks::orfLink(shift) }
link_target  = sub { GBrowse::PopupAndLinks::orfTitle(shift) }
citation     = ORFs greater than 600nt (200aa), generated by EuPathDB. 

[ORF:50000]
feature     = ORF:density
glyph        = xyplot
graph_type   = boxes
key          = ORF density
scale        = right
bgcolor      = lightslategray
fgcolor      = blue
height       = 60
min_score    = 0
citation     = ORF density, shown for ORFs greater than 300nt (100aa). 


[EST]
feature      = alignment:EST
glyph        = segments
bgcolor      = lightskyblue
fgcolor      = blue
description  = 0
label        = 0
height       = 6
link         = sub { GBrowse::PopupAndLinks::estLink(shift) }
link_target  = sub { GBrowse::PopupAndLinks::estTitle(shift) } 
category     = 3a. Transcript Expression Evidence
preset       = Annotation
key          = EST Alignments
citation     = Expressed sequence tags (ESTs) were obtained from dbEST and aligned to chromosomes.

[LowComplexity]
feature      = lowcomplexity:dust
category     = 6. Nucleotide Analysis
glyph        = segments
bgcolor      = grey
bump density = 5000
bump_limit   = 10
height       = 6
description  = 0
label        = 0
link         = 
key          = Low Complexity Regions
citation     = sub { GBrowse::Display::dustCitation() }

[TandemRepeat]
feature      = TandemRepeat:TRF
category     = 6. Nucleotide Analysis
glyph        = segments
bgcolor      = darkgrey
bump density = 5000
bump_limit   = 10
height       = 6
description  = 0
label        = 0
link         = 
key          = Tandem Repeats
citation     = Regions of tandem repeats, as defined by the
               <code>Tandem Repeats Finder</code> program by Gary Benson

[Frames]
feature      = gene:annotation
category     = 6. Nucleotide Analysis
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
height       = 20
link     = 
label      = 
description  = 0
key          = Frame Usage
citation     = Glyphs in this track indicate which reading frame is used.  Shades of red indicate a right to left direction while shades of blue indicate a left to right direction.  

[TranslationF]
glyph        = translation
category     = 6. Nucleotide Analysis
global feature = 1
frame0       = cadetblue
frame1       = blue
frame2       = darkblue
height       = 40
fgcolor      = purple
strand       = +1
translation  = 3frame
link        =
key          = 3-frame translation (forward) 
citation     = This draws three frame conceptutal translations of the forward strands. At low magnifications (zoomed way out), this track draws littel symbols indicating where start and stop codons are. At high magnifications, the actual amino acid sequence comes into view. <br /><br /> Frame +1: cadetblue <br />Frame +2: blue <br />Frame +3: darkblue

[TranslationR]
glyph        = translation
category     = 6. Nucleotide Analysis
global feature = 1
frame0       = darkred
frame1       = red
frame2       = crimson
height       = 40
fgcolor      = blue
strand       = -1
link        =
translation  = 3frame
key          = 3-frame translation (reverse)
citation     = This draws three frame conceptutal translations of the reverse strand. At low magnifications (zoomed way out), this track draws littel symbols indicating where start and stop codons are. At high magnifications, the actual amino acid sequence comes into view. <br /><br />Frame -1: darkred<br />Frame -2: red<br />Frame -3: crimson<br />

[DNA/GC Content]
glyph          = dna
category       = 6. Nucleotide Analysis
global feature = 1
height         = 40
do_gc          = 1
link           =
fgcolor        = red
axis_color     = blue
citation       = This displays a GC content graph of the reference sequence at low magnifications and the DNA sequence itself at higher magnifications. GC content is calculated based on a sliding window set at 100 nucleotides.

[AnnotationDensity]
feature      = annotation:density
category     = 1. Gene Models
glyph        = xyplot
graph_type   = boxes
bump density = 1
scale        = right
#scale       = both
bgcolor      = lightslategray
fgcolor      = blue
height       = 60
min_score    = 0
label        = 0
key          = Gene Density
citation     = <b>Density plot of annotated genes displayed on the entire chromosome.</b><br><br>This was caluclated by counting the number of genes in 50,000 base pair (50Kb) intervals. So each bar represents the number of genes (y axis = number of genes) in that 50Kb region of the chromosome.

[SyntenySpansEcuniculi]
feature      = match:syntenySpanMC
preset       = ESTsGenesAndSynteny
category     = 5. Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Encephalitozoon cuniculi GB-M1') }
label        = 0
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
height       = 8 
title        = 1
fgcolor      = sub { GBrowse::Display::gapFgcolor(shift) }
bgcolor      = sub { GBrowse::Display::gapBgcolor(shift) } 
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Encephalitozoon cuniculi GB-M1 genomic sequences
citation     = 


[SyntenyGenesEcuniculi]
feature      = gene:syntenyMC
#feature      = gene:syntenyTcruziSMC
#sqlName      = gene:syntenyMC2
#sqlParam     = taxon:'Trypanosoma cruzi strain Esmeraldo'
preset       = ESTsGenesAndSynteny
category     = 4. Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Encephalitozoon cuniculi GB-M1') }
description  = 0
label        = 0
font2color   = darkgrey
tkcolor      = azure
bgcolor     = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
height       = 8 
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key          = Encephalitozoon cuniculi GB-M1 Syntenic Genes
citation     = Genes found within syntenic spans.

[SyntenySpansEintestinalis]
feature      = match:syntenySpanMC
preset       = ESTsGenesAndSynteny
category     = 5. Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Encephalitozoon intestinalis') }
label        = 0
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
height       = 8 
title        = 1
fgcolor      = sub { GBrowse::Display::gapFgcolor(shift) }
bgcolor      = sub { GBrowse::Display::gapBgcolor(shift) } 
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Encephalitozoon intestinalis genomic sequences
citation     = 

[SyntenyGenesEintestinalis]
feature      = gene:syntenyMC
preset       = ESTsGenesAndSynteny
category     = 4. Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Encephalitozoon intestinalis') }
description  = 0
label        = 0
font2color   = darkgrey
tkcolor      = azure
bgcolor     = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
height       = 8 
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key          = Encephalitozoon intestinalis Syntenic Genes
citation     = Genes found within syntenic spans.

[SyntenySpansEHellem]
feature      = match:syntenySpanMC
preset       = ESTsGenesAndSynteny
category     = 5. Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Encephalitozoon hellem ATCC 50504') }
label        = 0
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
height       = 8 
title        = 1
fgcolor      = sub { GBrowse::Display::gapFgcolor(shift) }
bgcolor      = sub { GBrowse::Display::gapBgcolor(shift) } 
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Encephalitozoon hellem genomic sequences
citation     = 

[SyntenyGenesEHellem]
feature      = gene:syntenyMC
preset       = ESTsGenesAndSynteny
category     = 4. Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Encephalitozoon hellem ATCC 50504') }
description  = 0
label        = 0
font2color   = darkgrey
tkcolor      = azure
bgcolor     = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
height       = 8 
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key          = Encephalitozoon hellem Syntenic Genes
citation     = Genes found within syntenic spans.

[SyntenySpansEbieneusi]
feature      = match:syntenySpanMC
preset       = ESTsGenesAndSynteny
category     = 5. Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Enterocytozoon bieneusi H348') }
label        = 0
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
height       = 8 
title        = 1
fgcolor      = sub { GBrowse::Display::gapFgcolor(shift) }
bgcolor      = sub { GBrowse::Display::gapBgcolor(shift) } 
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Encephalitozoon bieneusi genomic sequences
citation     = 

[SyntenyGenesEbieneusi]
feature      = gene:syntenyMC
preset       = ESTsGenesAndSynteny
category     = 4. Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Enterocytozoon bieneusi H348') }
description  = 0
label        = 0
font2color   = darkgrey
tkcolor      = azure
bgcolor     = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
height       = 8 
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key          = Encephalitozoon bieneusi Syntenic Genes
citation     = Genes found within syntenic spans.

[SyntenySpansNcerenae]
feature      = match:syntenySpanMC
preset       = ESTsGenesAndSynteny
category     = 5. Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Nosema ceranae BRL01') }
label        = 0
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
height       = 8 
title        = 1
fgcolor      = sub { GBrowse::Display::gapFgcolor(shift) }
bgcolor      = sub { GBrowse::Display::gapBgcolor(shift) } 
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Nosema ceranae genomic sequences
citation     = 

[SyntenyGenesNcerenae]
feature      = gene:syntenyMC
preset       = ESTsGenesAndSynteny
category     = 4. Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Nosema ceranae BRL01') }
description  = 0
label        = 0
font2color   = darkgrey
tkcolor      = azure
bgcolor     = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
height       = 8 
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key          = Nosema ceranae Syntenic Genes
citation     = Genes found within syntenic spans.


#[DoTSAssemblies]
#feature      = alignment:DoTSAssemblies
#category     = 3a. Transcript Expression Evidence
#glyph        = graded_segments
#bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
#description  = 0
#height       = 8
#title        = sub { GBrowse::PopupAndLinks::assemblyTitle(shift) }
#link        = sub { GBrowse::PopupAndLinks::assemblyLink(shift) }
#glyph        = graded_segments
#strand_arrow = 0
#bump_limit   = 50
#key          = DoTS EST Assemblies
#citation     =  DoTS stands for The Database of Transcribed Sequences. The naming of this feature as "DoTS EST Assemblies" is for historical reasons only. This track shows <a href="http://www.ncbi.nlm.nih.gov/pubmed/11932250">BLAT</a> alignment of consensus transcript sequences (DTs) to the genome. DTs are generated by clustering ESTs based on BLAT alignment to the genome followed by <a href="http://www.ncbi.nlm.nih.gov/pubmed/10508846"> CAP4</a> assembly.
