[GENERAL]
description   = PiroplasmaDB
db_adaptor    = DAS::GUS
db_args       = sub { GBrowse::Configuration::init('gbrowseQueries.xml') }
search_instructions =

# important EuPathDB set this id to 1
image_id      = 1

plugins = BatchDumper FastaDumper GFFDumper RestrictionAnnotator Submitter

# Web site configuration info
gbrowse root = gbrowse
stylesheet   = /assets/css/eupath_gbrowse.css
buttons      = images/buttons
js           = js
tmpimages    = tmp

region segment = 10000
initial landmark = AAXT01000006:6829..10916
 
# advanced features
# balloon tips on and drag off
balloon tips  = 1
drag and drop = 0

# one hour
cache time    = 1

request timeout = 240 

# where to link to when user clicks in detailed view
link          =

# what image widths to offer
image widths  = 450 640 800 1024 1280

# color of the selection rectangle
hilite fill    = beige
hilite outline = red

# default width of detailed view (pixels)
default width = 800
default features = Gene

# max and default segment sizes for detailed view
max segment     = 10000000
default segment = 50000

# zoom levels
zoom levels    = 50 100 200 1000 2000 5000 10000 20000 40000 100000 200000 500000 1000000

show sources = 0
default varying = 1 # tracks appear as defined below, not in alphabetical order

# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgoldenrodyellow
key bgcolor      = beige

default varying = 1 # tracks appear as defined below, not in alphabetical order

# examples to show in the introduction
examples = AAXT01000006:6829..10916
           CR940352:128013..129434 
           TP01_0016 
           "Transmembrane Protein"

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Gene


### HTML TO INSERT AT VARIOUS STRATEGIC LOCATIONS ###
# inside the <head></head> section
head = <script type='text/javascript' src='/a/js/newwindow.js'></script>

# at the top...
header = \&myheader();
footer = \&myfooter();

# Various places where you can insert your own HTML -- see configuration docs
html1 = sub { GBrowse::Display::warnNote(shift, 'piroplasmadb') }
html2 = <script type='text/javascript' src='/a/js/newwindow.js'></script>
html3 = <script type="text/javascript" src="/gbrowse/apiGBrowsePopups.js"></script>
html4 = 
html5 = 
html6 = <script language="JavaScript" type="text/javascript" src="/gbrowse/wz_tooltip.js"></script>

init_code = use vars qw( $CFG );
            use GBrowse::Configuration;
            use GBrowse::Display;
            use GBrowse::Filter;
            use GBrowse::PopupAndLinks;
            $CFG = new GBrowse::Configuration; 

postgrid  = \&mypostgrid(); 

# Advanced feature: 
# Pop up rubberband menus for submitting selected region to search engines...
#include "overview_select_menu.conf"
#include "region_select_menu.conf"
#include "submitter_plugin.conf"

# Default glyph settings
#include "track_defaults.conf" 

### TRACK CONFIGURATION ####
# the remainder of the sections configure individual tracks

[Gene]
feature      = gene:annotation 
glyph        = processed_transcript_gtu
bgcolor      = sub { GBrowse::Display::bgColorFromStrandAndDeprecated(shift, 'blue', 'red','lightblue', 'pink') }
font2color   = black
height       = 8 
description  = 0
bump density = 100
label density = 100
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
link_target        = sub { GBrowse::PopupAndLinks::geneTitle(shift) }
label 		   = 1
draw_dna     = 1
preset       = Annotation
key          = Annotated Genes
citation     = Annotated gene track shows protein coding, rRNA and tRNA genes.  Blue color indicates that gene is forward strand (light blue is deprecated). Red color indicates that gene is reverse strand (pink is deprecated).

[SyntenySpanTannulata]
feature      = match:syntenySpanMC
preset       = Synteny
category     = Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Theileria annulata strain Ankara') }
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
tkcolor      = azure
height       = 8
title        = 1
connector_color = white
label        = sub { GBrowse::Display::synSpanLabel(shift) }
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Theileria annulata Syntenic Sequences 
citation     = Stretches of likely chromosomal synteny to <i>Theileria annulata</i> strain Ankara.

[SyntenyTannulata]
feature      = gene:syntenyMC
preset       = Synteny
category     = Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Theileria annulata strain Ankara') }
label        = 1
font2color   = darkgrey
tkcolor      = azure
bgcolor      = sub { GBrowse::Display::bgColorFromStrandAndDeprecated(shift, 'blue', 'red','lightblue', 'pink') }
height       = 8
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key         = Theileria annulata Syntenic Genes
citation    = <i>Theileria annulata</i> strain Ankara genes found within syntenic spans.


[SyntenySpanTparva]
feature      = match:syntenySpanMC
preset       = Synteny
category     = Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Theileria parva strain Muguga') }
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
tkcolor      = azure
height       = 8
title        = 1
connector_color = white
label        = sub { GBrowse::Display::synSpanLabel(shift) }
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Theileria parva Syntenic Sequences
citation     = Stretches of likely chromosomal synteny to <i>Theileria parva</i> strain Muguga.

[SyntenyTparva]
feature      = gene:syntenyMC
preset       = Synteny
category     = Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Theileria parva strain Muguga') }
#description  = 1
label        = 1
font2color   = darkgrey
tkcolor      = azure
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
height       = 8
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key         = Theileria parva Syntenic Genes
citation    = <i>Theileria parva</i> strain Muguga genes found within syntenic spans.

[SyntenySpanBbovis]
feature      = match:syntenySpanMC
preset       = Synteny
category     = Syntenic Regions
glyph        = arrow
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Babesia bovis T2Bo') }
relative_coords = 1
relative_coords_offset = sub { GBrowse::Display::synSpanRelativeCoords(shift) }
scale        = sub { GBrowse::Display::synSpanScale(shift) }
linewidth    = 2
tick         = 2
base         = 1
stranded     = 1
tkcolor      = azure
height       = 8
title        = 1
connector_color = white
label        = sub { GBrowse::Display::synSpanLabel(shift) }
link_target  = sub { GBrowse::PopupAndLinks::synSpanTitle(shift) }
link         = sub { GBrowse::PopupAndLinks::synSpanLink(shift) }
key          = Babesia bovis Syntenic Sequences
citation     = Stretches of likely chromosomal synteny to <i>Babesia bovis</i> T2Bo.

[SyntenyBbovis]
feature      = gene:syntenyMC
preset       = Synteny
category     = Syntenic Genes
glyph        = processed_transcript_gtu
filter       = sub { GBrowse::Filter::filterByTaxon(shift, 'Babesia bovis T2Bo') }
label        = 1
font2color   = darkgrey
tkcolor      = azure
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'blue', 'red') }
height       = 8
title = 1
link_target = sub { GBrowse::PopupAndLinks::synGeneTitle(shift) }
link          = sub { GBrowse::PopupAndLinks::geneLink(shift) }
key         = Babesia bovis Syntenic Genes
citation    = <i>Babesia bovis</i> T2Bo genes found within syntenic spans.


[BLASTX]
feature      = match:WU_BLASTX
glyph        = graded_segments
height       = 6 
label        = 0
stranded     = 1
bump density = 5000
bump_limit   = 10
link         = http://www.ncbi.nlm.nih.gov/entrez/viewer.fcgi?db=protein&val=$name
link_target  = sub { GBrowse::PopupAndLinks::blastxTitle(shift) }
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'navy', 'maroon') }
category     = Alignment
key          = GenBank Non-Redundant Protein (NRDB)
citation     = Theileria and Babesia contig sequences vs NRDB:  <br /> BLASTX blastx version: BLASTX 2.0MP-WashU. <br /><br /> Parameters used: matrix=BLOSUM62 V=100 B=1000000 -hspmax=1000000 W=4 T=18 -gi E=1e-3 -wordmask=seg -hspsepQmax=50000 -span1 -topcomboN=1. <br /><br /> In house scripts where used to post-process the results by E-value, match length and overlap for display top 5 matches in GBrowse.


[ORF]
feature      = alignment:ORF
sqlName      = alignment:ORFlength
sqlParam     = minLength:'150'
glyph        = segments
height       = 4
key          = ORF >/= 150 nucleotides (50 amino acids)
stranded     = 0
bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
fgcolor      = black
bump density  = 500
description  = 0
label       = 0
bump_limit  = 10
link         = sub { GBrowse::PopupAndLinks::orfLink(shift) }
link_target  = sub { GBrowse::PopupAndLinks::orfTitle(shift) }
citation     = ORFs greater than 150nt (50aa), generated by EuPathDB.

[ORF300]
feature      = alignment:ORF300
sqlName      = alignment:ORFlength
sqlParam     = minLength:'300'
glyph        = segments
height       = 4
key          = ORF >/= 300 nucleotides (100 amino acids)
stranded     = 0
bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
fgcolor      = black
bump density  = 5000
description  = 0
label       = 0
bump_limit  = 10
link         = sub { GBrowse::PopupAndLinks::orfLink(shift) }
link_target  = sub { GBrowse::PopupAndLinks::orfTitle(shift) }
citation     = ORFs greater than 300nt (100aa), generated by EuPathDB.

[ORF600]
feature      = alignment:ORF600
sqlName      = alignment:ORFlength
sqlParam     = minLength:'600'
glyph        = segments
height       = 4
key          = ORF >/= 600 nucleotides (200 amino acids)
stranded     = 0
bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
fgcolor      = black
bump density  = 5000
description  = 0
label       = 0
bump_limit  = 10
link         = sub { GBrowse::PopupAndLinks::orfLink(shift) }
link_target  = sub { GBrowse::PopupAndLinks::orfTitle(shift) }
citation     = ORFs greater than 600nt (200aa), generated by EuPathDB. 

#[DoTSAssemblies]
#feature      = alignment:DoTSAssemblies
#category  = Alignment
#glyph        = segments
#bgcolor      = sub { my ($f, undef, undef, undef, $glyph) = @_; GBrowse::Display::glyphFlipBgColor($f, $glyph) }
#description  = 0
#height       = 8
#title        = sub { GBrowse::PopupAndLinks::assemblyTitle(shift) }
#link        = sub { GBrowse::PopupAndLinks::assemblyLink(shift) }
##das category = similarity
#glyph        = graded_segments
#strand_arrow = 0
#bump_limit   = 50
#key          = DoTS EST Assemblies
#citation     = This track shows BLAT alignment of DTs to the genome (W.J.Kent (2002) BLAT-The BLAST-Like Alignment Tool, Genome Research 12:656-664). DTs are consensus transcript sequences generated by clustering ESTs based on BLAT alignment to the genome followed by CAP4 assembly ( Huang, X. and Madan, A. (1999) CAP3: A DNA Sequence Assembly Program. Genome Research, 9: 868-877).

[Frames]
feature      = gene:annotation
glyph        = cds
frame0f      = cadetblue
frame1f      = blue
frame2f      = darkblue
frame0r      = darkred
frame1r      = red
frame2r      = crimson
height       = 20
link		 = 
label 		 = 
description  = 0
key          = Frame Usage

[TranslationF]
glyph        = translation
global feature = 1
frame0       = cadetblue
frame1       = blue
frame2       = darkblue
height       = 40
fgcolor      = purple
strand       = +1
translation  = 3frame
link 	     =
key          = 3-frame translation (forward) 
citation     = It draws three frame conceptutal translations. At low magnifications (zoomed way out), this track draws littel symbols indicating where start and stop codons are. At high magnifications, the actual amino acid sequence comes into view. <br /><br /> Frame +1: cadetblue <br />Frame +2: blue <br />Frame +3: darkblue

[DNA/GC Content]
glyph		 = dna
global feature = 1
height		 = 40
do_gc        = 1
link 	     =
fgcolor		 = red
axis_color   = blue
citation     = It displays a GC content graph of the reference sequence at low magnifications and the DNA sequence itself at higher magnifications.

[TranslationR]
glyph        = translation
global feature = 1
frame0       = darkred
frame1       = red
frame2       = crimson
height       = 40
fgcolor      = blue
strand       = -1
link 	     =
translation  = 3frame
key          = 3-frame translation (reverse)
citation     = It draws three frame conceptutal translations. At low magnifications (zoomed way out), this track draws littel symbols indicating where start and stop codons are. At high magnifications, the actual amino acid sequence comes into view. <br /><br />Frame -1: darkred<br />Frame -2: red<br />Frame -3: crimson<br />


[AnnotationDensity]
feature      = annotation:density
glyph        = xyplot
graph_type   = boxes
bump density = 1
scale        = right
#scale       = both
bgcolor      = lightslategray
fgcolor      = blue
height       = 60
min_score    = 0
label        = 0
key          = Gene Density
citation     = See <a href="#Annotation">below</a>.


[LowComplexity]
feature      = lowcomplexity:dust
glyph        = segments
bgcolor      = grey
height       = 6
bump density  = 5000
bump_limit  = 10
description  = 0
label        = 0
link         = 
key          = Low Complexity Regions
citation     = Regions of low sequence complexity, as defined by the
               <code>dust</code> algorithm


[TandemRepeat]
feature      = TandemRepeat:TRF
glyph        = segments
bump density  = 5000
bump_limit  = 10
bgcolor      = darkgrey
height       = 6
description  = 0
label        = 0
link         = 
key          = Tandem Repeats
citation     = Regions of tandem repeats, as defined by the
               <code>Tandem Repeats Finder</code> program by Gary Benson
